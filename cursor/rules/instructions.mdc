---
alwaysApply: true
---

Counsy AI â€“ Technical Instructions (v1.0)

Last updated: 27â€¯Julâ€¯2025

â¸»

0 Â· Quickâ€‘start TL;DR

# ğŸ‘‡ Local dev in 90â€¯s
pnpm i                           # 1. Install root deps
pnpm -w run db:up || true        # 2. (optional) start local DB if used
pnpm sst dev                     # 3. Spin up SST (Fastify Î» + ts-rest)
pnpm --filter mobile expo start  # 4. Reactâ€‘Native client (Expo 50)

All secrets live in infra/.env.*. Use infra/.env.example as template and grab dev creds via 1Password.

â¸»

1 Â· Architecture Overview

Hexagonal, serverlessâ€‘first.

 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 â”‚  React Native (Expo)      â”‚
 â”‚  + NativeWind v4          â”‚
 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚ ts-rest (pure TS RPC over HTTPS)
 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 â”‚  Fastify Lambda API       â”‚
 â”‚  â€¢ ts-rest router            â”‚
 â”‚  â€¢ Auth adapter (Better)  â”‚
 â”‚  â€¢ BLL (hex ports)        â”‚
 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚ Postgres (RDS, IAM auth)
 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 â”‚  Drizzle ORM              â”‚    â”‚  ElevenLabs TTS           â”‚
 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚ S3 (AES-256-GCM)    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚ KMS (data keys)     â”‚  OpenAI GPT               â”‚
             â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Deployed via SST CDK. One stack â‰ˆ 20 resources: API Gateway, Lambda@Edge, RDS Proxy, S3, CloudFront, WAF, EventBridge, CloudWatch, IAM, KMS.

â¸»

2 Â· Repo Layout (pnpm workspaces)

Path	Purpose
apps/landing-page	Next.js marketing site
apps/mobile		Expo 50 RN client
packages/ai		Mastra AI integrations/utilities
packages/config	Shared ESLint + TS configs
packages/db		Drizzle schema + migrations
packages/infra		SST app (infra) [services/infra in this repo]
packages/shared	Shared utils/telemetry/core
packages/ts-rest	ts-rest contract package
packages/types	Shared types, constants, enums, schemas
services/api		Fastify Î» + ts-rest router (TypeScript)
services/ai-background-service	Background workers/queues
infra/			SST stacks + IaC (actual path: packages/infra or services/infra)
.github/workflows	CI + CD pipelines


â¸»

3 Â· Local Development Setup
	1.	Prereqs: Nodeâ€¯^20, pnpmâ€¯^9, Docker Desktop, AWS CLI + aws-vault, Xcode 15 / Android Studio.
	2.	pnpm i â€“ installs root + workspace deps.
	3.	pnpm -w run db:migrate â€“ run Drizzle migrations against local/remote DB.
	4.	pnpm sst dev â€“ hotâ€‘reload Lambda + local mocks as configured.
	5.	pnpm --filter mobile expo start â€“ QRâ€‘scan to device.

Tip: Use the VSÂ Code Cursor extension for AIâ€‘assisted inline code review (preâ€‘configured .cursor/config.toml).

â¸»

4 Â· Environment Variables

# Common
NODE_ENV=development
LOG_LEVEL=debug

# Postgres
DATABASE_URL=postgres://user:pass@localhost:5432/counsy
PGSSLMODE=disable

# Auth
JWT_SECRET=devâ€‘onlyâ€‘changeâ€‘me

# OpenAI
OPENAI_API_KEY=â€¦
OPENAI_MODEL=gpt-4o-mini

# ElevenLabs
ELEVENLABS_API_KEY=â€¦
VOICE_ID=â€¦

# AWS
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=â€¦
AWS_SECRET_ACCESS_KEY=â€¦
KMS_KEY_ID=alias/counsy-data
S3_BUCKET=counsy-prod-chatblobs

Prod values injected by the SST GitHub Action via OIDC â†’Â AWS Secrets Manager.

â¸»

5 Â· Authentication & Session Flow
	1.	Better Auth issues a JWT (RS256) valid 30â€¯d.
	2.	Refresh rotates every 7â€¯d (rotate=true), mitigating token replay.
	3.	Passwords hashed with Argon2id (t=3, m=65536, p=1).
	4.	Optional passkey / WebAuthn fully supported on mobile (reactâ€‘native-webauthn).
	5.	ts-rest client sends Authorization: Bearer <JWT>; Fastify plugin validates via JWKS (cached 5â€¯m).

Roleâ€‘based RBAC via user.role âˆˆ {user, therapist, admin}; guarded by @protected({ role: 'therapist' }) decorator.

â¸»

6 Â· Data Model (Drizzle excerpt)

export const users = pgTable('users', {
  id: uuid('id').primaryKey().defaultRandom(),
  email: text('email').unique().notNull(),
  hash: text('hash').notNull(),
  createdAt: timestamp('created_at').defaultNow()
});

export const sessions = pgTable('sessions', {
  id: uuid('id').primaryKey().defaultRandom(),
  userId: uuid('user_id').references(() => users.id),
  startedAt: timestamp('started_at').defaultNow(),
  minutesUsed: integer('minutes_used').default(0)
});


â¸»

7 Â· Security & Compliance

7.1 Threat Model (STRIDE)

Category	Mitigation
Spoofing	JWT + passkey, TLSÂ 1.3, HSTS, WAF IP rateâ€‘limits
Tampering	KMSâ€‘managed AESâ€‘256â€‘GCM on S3, Argon2id password hashing
Repudiation	CloudTrail + API Gateway access logs, immâ€‘storage logs retention 1Â y
Information Disclosure	E2EE at rest via clientâ€‘side AES, PHI segregated, leastâ€‘priv IAM
Denial of Service	APIâ€‘GW throttling (100Â r/s + burstÂ 50), CloudFront WAF, multiâ€‘AZ RDS
Elevation of Privilege	strict IAM scoping, IAM SCPs, Lambda leastâ€‘priv roles

7.2 Encryption

Layer	Atâ€‘Rest	Inâ€‘Transit
Mobile DB	AESâ€‘256 (SQLCipher)	n/a
Cloud blobs (S3)	AESâ€‘256â€‘GCM (clientâ€‘side) + SSE-KMS	TLSÂ 1.3
Postgres (RDS)	AESâ€‘256 (AWSâ€‘KMS)	TLSÂ 1.2 enforced
Secrets	AWS Secrets Manager (AESâ€‘256â€‘KMS)	IAM signed requests

7.3 Compliance Matrix

Law / Std	Requirement	Implementation
HIPAA (US)	Encryption (45Â CFRÂ Â§164.312), audit logs	AESâ€‘256 E2EE; CloudTrail 1â€¯y
HIPAA BAA	Signed with ElevenLabs & AWS	Stored in legal/
GDPR (EU)	Data subject rights, DPA, EUâ€‘â†’US transfer (SCC)	KMS keys in euâ€‘centralâ€‘1; AWS SCC attached
CCPA (USâ€‘CA)	Optâ€‘out, delete (CCPA Â§1798.105)	/api/v1/account/delete purges within 30â€¯d
ISOÂ 27001 (target)	ISMS policies, quarterly risk review	Doc in security/ISMS/

Dataâ€‘retention: chat audio & transcripts purge after 3â€¯y (default) or userâ€‘initiated wipe (under 24â€¯h).Panic Erase is immediate.

7.4 Secure SDLC
	â€¢	SAST & SCA via GitHub Advanced Security (CodeQL, Dependabot).
	â€¢	DAST nightly with OWASP ZAP against staging.
	â€¢	Secrets scanner fails PR on leak.
	â€¢	Mandatory codeâ€‘owner review + Cursor AI lint hints.
	â€¢	Production deploys require 2â€‘man rule via GitHub Environments.

â¸»

8 Â· CI/CD Pipeline (GitHub Actions)

name: ci
on: [push]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: pnpm/action-setup@v3
        with: { version: 9 }
      - run: pnpm i --frozen-lockfile
      - run: pnpm turbo run lint test --concurrency=4

  deploy:
    needs: test
    if: github.ref == 'refs/heads/main'
    permissions:
      id-token: write
      contents: read
    environment: prod
    runs-on: ubuntu-latest
    steps:
      - uses: aws-actions/configure-aws-credentials@v4
        with: { role-to-assume: ${{ secrets.AWS_OIDC_ROLE }}, aws-region: us-east-1 }
      - run: pnpm sst deploy --stage prod

Prod deploys takeÂ < 4Â min; rollbacks sst remove --stage prod --retain keeps data.

â¸»

9 Â· Observability

Layer	Tool	Metric / Alert
Client	Sentry RN	Crashâ€‘free â‰¥ 99.5 %
Lambda	CloudWatch + X-Ray	p95 â‰¤ 400â€¯ms, errorÂ rate < 0.5â€¯%
DB	RDS PerformanceÂ Insights	CPU â‰¤ 70â€¯%, unusedÂ connections < 100
Billing	AWS Budgets	Alarm at â‰¥ 80â€¯% of $8â€¯k monthly guardrail
Product	Amplitude	D30 retention, funnel dropâ€‘offs

PagerDuty onâ€‘call rotates weekly; SLA 99.9â€¯% API uptime.

â¸»

10 Â· Legal & Privacy Notes
	â€¢	PHI classified as Critical. Covered by HIPAA; stored only encrypted.
	â€¢	DPA & SCC executed with OpenAI and ElevenLabs.
	â€¢	Children <13 explicitly disallowed (COPPA). Age gate in onboarding.
	â€¢	GDPR ArtÂ 27 EU representative: Lexâ€‘Data GmbH, Berlin.
	â€¢	Data Processing Agreement template in legal/DPA-template.pdf.

â¸»

11 Â· Backup & DR
	â€¢	Postgres: daily snapshots (RDS, 7â€‘day PITR).
	â€¢	S3: versioning + replication to us-west-2 bucket.
	â€¢	KMS keys: automatic rotation 365â€¯d.
	â€¢	Restore objective: â‰¤ 30â€¯min RTO, â‰¤ 5â€¯min RPO.

â¸»

12 Â· Performance & Loadâ€‘Test Baseline

Scenario	Users	p95 (ms)	Errors	Notes
1â€¯min voice session	1â€¯k	320	0.1â€¯%	20 Lambdaâ€¯/â€¯AZ
Transcript retrieval (S3)	5â€¯k	180	0.05â€¯%	CloudFront cached
Auth token refresh	10â€¯k	90	0.02â€¯%	RDS Proxy warm

Gatling scripts in tests/load/.

â¸»

13 Â· Open Issues / Future Work
	â€¢	SOCÂ 2 Typeâ€¯I audit â€“ targeted Q4â€¯2025.
	â€¢	Privacyâ€‘preserving analytics (Snowplow + differential privacy).
	â€¢	Voice diarization (speaker separation) for multiâ€‘party therapy.
	â€¢	K8s migration (EKS) once DAUÂ > 100â€¯k.

â¸»

End of Technical InstructionsCounsy AI â€“ Technical Instructions (v1.0)

Last updated: 27â€¯Julâ€¯2025

â¸»

0 Â· Quickâ€‘start TL;DR

# ğŸ‘‡ Local dev in 90â€¯s
pnpm i          # 1. Install root deps
pnpm sst dev    # 2. Spin up SST (Fastify Î» + ts-rest + local Postgres)
expo start      # 3. Reactâ€‘Native client (Expo 50)

All secrets live in infra/.env.*. Use infra/.env.example as template and grab dev creds via 1Password.

â¸»

1 Â· Architecture Overview

Hexagonal, serverlessâ€‘first.

 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 â”‚  React Native (Expo)      â”‚
 â”‚  + NativeWind v4          â”‚
 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚ ts-rest (pure TS RPC over HTTPS)
 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 â”‚  Fastify Lambda API       â”‚
 â”‚  â€¢ ts-rest router            â”‚
 â”‚  â€¢ Auth adapter (Better)  â”‚
 â”‚  â€¢ BLL (hex ports)        â”‚
 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚ Postgres (RDS, IAM auth)
 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 â”‚  Drizzle ORM              â”‚    â”‚  ElevenLabs TTS           â”‚
 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚ S3 (AES-256-GCM)    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚ KMS (data keys)     â”‚  OpenAI GPT               â”‚
             â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Deployed via SST CDK. One stack â‰ˆ 20 resources: API Gateway, Lambda@Edge, RDS Proxy, S3, CloudFront, WAF, EventBridge, CloudWatch, IAM, KMS.

â¸»

2 Â· Repo Layout (pnpm workspaces)

Path	Purpose
apps/mobile	Expo 50 RN client
apps/server	Fastify Î» + ts-rest router (TypeScript)
packages/db	Drizzle schema + migrations
packages/types	Shared Zod validators & API types
packages/auth	Betterâ€‘Auth adapter + guards
infra/	SST stacks + IaC
.github/workflows	CI + CD pipelines


â¸»

3 Â· Local Development Setup
	1.	Prereqs: Nodeâ€¯^20, pnpmâ€¯^9, Docker Desktop, AWS CLI aws-vault, Xcode 15 / Android Studio, aws-sam-cli (for Lambda debug).
	2.	pnpm i â€“ installs root + workspace deps.
	3.	pnpm db:migrate â€“ spins an ephemeral Postgres via Docker and runs Drizzle migrations.
	4.	sst dev â€“ hotâ€‘reload Lambda + localstack mocks (S3, SSM).
	5.	expo start â€“ QRâ€‘scan to device.

Tip: Use the VSÂ Code Cursor extension for AIâ€‘assisted inline code review (preâ€‘configured .cursor/config.toml).

â¸»

4 Â· Environment Variables

# Common
NODE_ENV=development
LOG_LEVEL=debug

# Postgres
DATABASE_URL=postgres://user:pass@localhost:5432/counsy
PGSSLMODE=disable

# Auth
JWT_SECRET=devâ€‘onlyâ€‘changeâ€‘me

# OpenAI
OPENAI_API_KEY=â€¦
OPENAI_MODEL=gpt-4o-mini

# ElevenLabs
ELEVENLABS_API_KEY=â€¦
VOICE_ID=â€¦

# AWS
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=â€¦
AWS_SECRET_ACCESS_KEY=â€¦
KMS_KEY_ID=alias/counsy-data
S3_BUCKET=counsy-prod-chatblobs

Prod values injected by the SST GitHub Action via OIDC â†’Â AWS Secrets Manager.

â¸»

5 Â· Authentication & Session Flow
	1.	Better Auth issues a JWT (RS256) valid 30â€¯d.
	2.	Refresh rotates every 7â€¯d (rotate=true), mitigating token replay.
	3.	Passwords hashed with Argon2id (t=3, m=65536, p=1).
	4.	Optional passkey / WebAuthn fully supported on mobile (reactâ€‘native-webauthn).
	5.	ts-rest client sends Authorization: Bearer <JWT>; Fastify plugin validates via JWKS (cached 5â€¯m).

Roleâ€‘based RBAC via user.role âˆˆ {user, therapist, admin}; guarded by @protected({ role: 'therapist' }) decorator.

â¸»

6 Â· Data Model (Drizzle excerpt)

export const users = pgTable('users', {
  id: uuid('id').primaryKey().defaultRandom(),
  email: text('email').unique().notNull(),
  hash: text('hash').notNull(),
  createdAt: timestamp('created_at').defaultNow()
});

export const sessions = pgTable('sessions', {
  id: uuid('id').primaryKey().defaultRandom(),
  userId: uuid('user_id').references(() => users.id),
  startedAt: timestamp('started_at').defaultNow(),
  minutesUsed: integer('minutes_used').default(0)
});


â¸»

7 Â· Security & Compliance

7.1 Threat Model (STRIDE)

Category	Mitigation
Spoofing	JWT + passkey, TLSÂ 1.3, HSTS, WAF IP rateâ€‘limits
Tampering	KMSâ€‘managed AESâ€‘256â€‘GCM on S3, Argon2id password hashing
Repudiation	CloudTrail + API Gateway access logs, immâ€‘storage logs retention 1Â y
Information Disclosure	E2EE at rest via clientâ€‘side AES, PHI segregated, leastâ€‘priv IAM
Denial of Service	APIâ€‘GW throttling (100Â r/s + burstÂ 50), CloudFront WAF, multiâ€‘AZ RDS
Elevation of Privilege	strict IAM scoping, IAM SCPs, Lambda leastâ€‘priv roles

7.2 Encryption

Layer	Atâ€‘Rest	Inâ€‘Transit
Mobile DB	AESâ€‘256 (SQLCipher)	n/a
Cloud blobs (S3)	AESâ€‘256â€‘GCM (clientâ€‘side) + SSE-KMS	TLSÂ 1.3
Postgres (RDS)	AESâ€‘256 (AWSâ€‘KMS)	TLSÂ 1.2 enforced
Secrets	AWS Secrets Manager (AESâ€‘256â€‘KMS)	IAM signed requests

7.3 Compliance Matrix

Law / Std	Requirement	Implementation
HIPAA (US)	Encryption (45Â CFRÂ Â§164.312), audit logs	AESâ€‘256 E2EE; CloudTrail 1â€¯y
HIPAA BAA	Signed with ElevenLabs & AWS	Stored in legal/
GDPR (EU)	Data subject rights, DPA, EUâ€‘â†’US transfer (SCC)	KMS keys in euâ€‘centralâ€‘1; AWS SCC attached
CCPA (USâ€‘CA)	Optâ€‘out, delete (CCPA Â§1798.105)	/api/v1/account/delete purges within 30â€¯d
ISOÂ 27001 (target)	ISMS policies, quarterly risk review	Doc in security/ISMS/

Dataâ€‘retention: chat audio & transcripts purge after 3â€¯y (default) or userâ€‘initiated wipe (under 24â€¯h).Panic Erase is immediate.

7.4 Secure SDLC
	â€¢	SAST & SCA via GitHub Advanced Security (CodeQL, Dependabot).
	â€¢	DAST nightly with OWASP ZAP against staging.
	â€¢	Secrets scanner fails PR on leak.
	â€¢	Mandatory codeâ€‘owner review + Cursor AI lint hints.
	â€¢	Production deploys require 2â€‘man rule via GitHub Environments.

â¸»

8 Â· CI/CD Pipeline (GitHub Actions)

name: ci
on: [push]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: pnpm/action-setup@v3
        with: { version: 9 }
      - run: pnpm i --frozen-lockfile
      - run: pnpm turbo run lint test --concurrency=4

  deploy:
    needs: test
    if: github.ref == 'refs/heads/main'
    permissions:
      id-token: write
      contents: read
    environment: prod
    runs-on: ubuntu-latest
    steps:
      - uses: aws-actions/configure-aws-credentials@v4
        with: { role-to-assume: ${{ secrets.AWS_OIDC_ROLE }}, aws-region: us-east-1 }
      - run: pnpm sst deploy --stage prod

Prod deploys takeÂ < 4Â min; rollbacks sst remove --stage prod --retain keeps data.

â¸»

9 Â· Observability

Layer	Tool	Metric / Alert
Client	Sentry RN	Crashâ€‘free â‰¥ 99.5 %
Lambda	CloudWatch + X-Ray	p95 â‰¤ 400â€¯ms, errorÂ rate < 0.5â€¯%
DB	RDS PerformanceÂ Insights	CPU â‰¤ 70â€¯%, unusedÂ connections < 100
Billing	AWS Budgets	Alarm at â‰¥ 80â€¯% of $8â€¯k monthly guardrail
Product	Amplitude	D30 retention, funnel dropâ€‘offs

PagerDuty onâ€‘call rotates weekly; SLA 99.9â€¯% API uptime.

â¸»

10 Â· Legal & Privacy Notes
	â€¢	PHI classified as Critical. Covered by HIPAA; stored only encrypted.
	â€¢	DPA & SCC executed with OpenAI and ElevenLabs.
	â€¢	Children <13 explicitly disallowed (COPPA). Age gate in onboarding.
	â€¢	GDPR ArtÂ 27 EU representative: Lexâ€‘Data GmbH, Berlin.
	â€¢	Data Processing Agreement template in legal/DPA-template.pdf.

â¸»

11 Â· Backup & DR
	â€¢	Postgres: daily snapshots (RDS, 7â€‘day PITR).
	â€¢	S3: versioning + replication to us-west-2 bucket.
	â€¢	KMS keys: automatic rotation 365â€¯d.
	â€¢	Restore objective: â‰¤ 30â€¯min RTO, â‰¤ 5â€¯min RPO.

â¸»

12 Â· Performance & Loadâ€‘Test Baseline

Scenario	Users	p95 (ms)	Errors	Notes
1â€¯min voice session	1â€¯k	320	0.1â€¯%	20 Lambdaâ€¯/â€¯AZ
Transcript retrieval (S3)	5â€¯k	180	0.05â€¯%	CloudFront cached
Auth token refresh	10â€¯k	90	0.02â€¯%	RDS Proxy warm

Gatling scripts in tests/load/.

â¸»

13 Â· Open Issues / Future Work
	â€¢	SOCÂ 2 Typeâ€¯I audit â€“ targeted Q4â€¯2025.
	â€¢	Privacyâ€‘preserving analytics (Snowplow + differential privacy).
	â€¢	Voice diarization (speaker separation) for multiâ€‘party therapy.
	â€¢	K8s migration (EKS) once DAUÂ > 100â€¯k.

â¸»

End of Technical Instructions